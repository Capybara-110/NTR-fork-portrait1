<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0//EN">
<HTML>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Repository</title>
    <script src="functions.js"></script>
    <link rel="stylesheet" href="style.css">
    <link href="prism.css" rel="stylesheet" />
    <script src="prism.js"></script>

	<link rel="apple-touch-icon" sizes="180x180" href="icon/apple-touch-icon.png">
	<link rel="icon" type="image/png" sizes="32x32" href="icon/favicon-32x32.png">
	<link rel="icon" type="image/png" sizes="16x16" href="icon/favicon-16x16.png">
	<link rel="manifest" href="site.webmanifest">

    <style>
	.main_div{
		width: 90%;
		border: 1px solid #EEE;
		border-radius: 5px;
		margin: 1% auto;
		padding: 10px; 
		text-align: center;
	}
    </style>

</head>

<BODY>

<a href="index.html#s" class="back-to-home-link">
    ← Return to main page
</a>

<div class="main_div">
<h1>Repository</h1>

<p>
You can read more about the Steganeisodos project here 
<a target="_blank" href="https://mmsharapov.github.io/NTR">https://mmsharapov.github.io/NTR</a>.
</p>


<p>
In this version, we build <b>an adaptive portrait</b> for the user's natural typing rhythm (<span class="term">NTR</span>):
</p>
<!--- 
	All special characters must be replaced with their HTML equivalents. 
	<  	&lt;
	> 	&gt;
	& 	&amp;
	etc.
--->
<pre><code class="language-javascript">
const algo_name = "portrait 1 ver.";  // Please provide the name of your algorithm

function Portrait_1(arr, options = {}) {
  // Default options
  const {
    relativeTolerance = 0.1,       // 10%
    absoluteToleranceFactor = 0.01 // 1%
  } = options;

  // Handling extreme cases
  if (!arr || arr.length === 0) {
    return "";
  }
  if (arr.length === 1) {
    return "1";
  }

  // --- Adaptive tolerance calculation ---
  const maxMagnitude = Math.max(...arr.map(num =&gt; Math.abs(num)));
  const adaptiveAbsoluteTolerance = maxMagnitude * absoluteToleranceFactor;

  // --- Auxiliary function for determining similarity ---
  const areSimilar = (a, b) =&gt; {
    const absoluteDiff = Math.abs(a - b);

    // 1. Adaptive absolute tolerance check.
    // This works well for any scale, especially for numbers near zero.
    if (absoluteDiff &lt;= adaptiveAbsoluteTolerance) {
      return true;
    }

    // 2. If the first check fails, we use relative tolerance.
    // This is important for large numbers, where the absolute difference can be large.
    const maxLocalMagnitude = Math.max(Math.abs(a), Math.abs(b));
    if (maxLocalMagnitude === 0) {
      return true; // if a=0 and b=0
    }
    const relativeDiff = absoluteDiff / maxLocalMagnitude;

    return relativeDiff &lt; relativeTolerance;
  };

  // --- Basic logic ---
  let portraitString = "";
  let currentGroupCount = 1;

  for (let i = 1; i &lt; arr.length; i++) {
    if (areSimilar(arr[i], arr[i - 1])) {
      currentGroupCount++;
    } else {
      portraitString += currentGroupCount;
      currentGroupCount = 1;
    }
  }

  portraitString += currentGroupCount;
  return portraitString;
}


function checker(stats, arr){
        const av = [];
        for(let j=0; j &lt; stats[0].length; j++){ 
                av.push(Aver(getColumn(stats, j)));
        }
        const p_arr = Portrait_1(arr);
        const p_av = Portrait_1(av);
        return p_arr === p_av;
}
</code></pre>
</p>



<table>
<tbody>	
<tr>
	<td>portrait 1 ver.</td>
	<td><font color="green">●</font>&nbsp;<font color="red">●</font>&nbsp;<font color="red">●</font>&nbsp;<font color="red">●</font>&nbsp;<font color="red">●</font>&nbsp;<font color="red">●</font>&nbsp;<font color="green">●</font>&nbsp;<font color="green">●</font>&nbsp;<font color="green">●</font>&nbsp;<font color="green">●</font>&nbsp;<font color="green">●</font>&nbsp;<font color="green">●</font>&nbsp;<font color="green">●</font>&nbsp;<font color="green">●</font></td>
</tr>	        
<tr>
	<td>Hacker`s attempts</td>
	<td><font color="red">●</font>&nbsp;<font color="red">●</font>&nbsp;<font color="green">●</font>&nbsp;<font color="red">●</font>&nbsp;<font color="red">●</font>&nbsp;<font color="red">●</font>&nbsp;<font color="red">●</font>&nbsp;<font color="red">●</font>&nbsp;<font color="green">●</font>&nbsp;<font color="red">●</font>&nbsp;<font color="red">●</font>&nbsp;<font color="red">●</font>&nbsp;<font color="red">●</font>&nbsp;<font color="red">●</font></td>
</tr>	    
</tbody>
</table>




</div>
<p style="margin-bottom: 100px;"></p>

<script>



document.addEventListener('DOMContentLoaded', footer);

</script>


</BODY>
</HTML>